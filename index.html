<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3PFRVWJZ1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }

		let consentMode = localStorage.getItem("consentMode");
		let consentTimer = localStorage.getItem("consentTimer");

		if (consentMode === null || consentMode === "0") {
			gtag("consent", "default", {
				"analytics_storage": "denied",
			});
		} else {
			gtag("consent", "default", { "analytics_storage": "granted" });
		}

		if (consentMode !== null && consentMode === "0") {
			if (consentTimer !== null) {
				localStorage.setItem("consentTimer", parseInt(consentTimer) + 1);
				if (parseInt(consentTimer) + 1 >= 10) {
					localStorage.removeItem("consentMode");
					localStorage.setItem("consentTimer", 0);
					consentMode = null;
				}
			} else {
				localStorage.setItem("consentTimer", 0);
			}
		}

		function setConsent(granted) {
			if (granted) {
				localStorage.setItem("consentMode", "1");
				gtag("consent", "update", { "analytics_storage": "granted" });
			} else {
				localStorage.setItem("consentMode", "0");
				gtag("consent", "update", { "analytics_storage": "denied" });
			}
		}
	</script>
	<script>
		gtag('js', new Date());

		gtag('config', 'G-M3PFRVWJZ1');
	</script>

	<title>Genshin Impact Team Calculator</title>
	<link rel="icon" href="icon.png">

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" type="text/css" href="./css/main.css">
	<script src="./scripts/FileSaver.js"></script>

	<script type="module" src="./scripts/main.mjs"></script>

	<script type="module" src="./scripts/data/characters.mjs"></script>
	<script type="module" src="./scripts/data/weapons.mjs"></script>
	<script type="module" src="./scripts/data/materials.mjs"></script>
	<script type="module" src="./scripts/data/misc.mjs"></script>
</head>

<body style="overflow: hidden;">
	<img id="backdrop1"
		style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -100; user-select: none; filter: blur(8px); -webkit-filter: blur(8px); transform: scale(1.1);"
		src="resources/backdrop-night.png" draggable="false">
	<img id="backdrop2"
		style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -99; user-select: none; filter: blur(8px); -webkit-filter: blur(8px); transform: scale(1.1); transition: opacity 300ms;"
		src="resources/backdrop-day.png" draggable="false">

	<div style="display: none; position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; z-index: 100000; align-content: center; align-items: center;"
		class="fadeOut" id="downloadPopupWindow">
		<div style="position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; background-color: #020202; opacity: 25%;"
			id="popupBackground1">
		</div>
		<div style="position: absolute; border-radius: 10px; background-color: var(--lightGray); width: 400px; right: calc(50vw - 220px); margin-right: auto; padding: 0 10px 10px 10px; box-shadow: 0px 0px 9px 0px var(--dark);"
			id="download-popup">
			<p style="margin-left: 10px;">Download team materials</p>
			<div style="display: flex; align-items: center;">
				<input type="text" class="nameinput" id="fileNameField" placeholder="File name">
				<p style="line-height: 0px; color: var(--dark); margin-left: 5px; margin-right: 5px;">.txt</p>
			</div>
			<div style="display: flex; align-items: center;">
				<input type="submit" value="Cancel" style="width: 50%;" class="submBut" id="popupCancelButton">
				<input type="submit" value="Download" style="width: 50%;" class="submBut" id="popupDownloadButton">
			</div>
		</div>
	</div>

	<div style="display: none; position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; z-index: 100000; align-content: center; align-items: center;"
		class="fadeIn" id="cookiePopupWindow">
		<div
			style="position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; background-color: #020202; opacity: 25%;">
		</div>
		<div style="position: absolute; border-radius: 10px; background-color: var(--lightGray); width: 400px; right: calc(50vw - 220px); margin-right: auto; padding: 0 10px 10px 10px; box-shadow: 0px 0px 9px 0px var(--dark);"
			id="cookie-popup">
			<p style="margin-left: 5px;">Privacy notice</p>
			<div style="display: flex; flex-direction: column; align-items: left;">
				<p
					style="color: var(--dark); margin-left: 5px; margin-right: 5px; text-align: justify; line-height: 25px;">
					This website
					uses Google Analytics to provide its creator with insight on the traffic and demographics.
					Demographics information is only tracked when this notice is agreed, and is not associated with the
					user at any moment. Otherwise the demographics details are not tracked and completely anonymous.
					<b><i>The sole purpose of this information is
							to
							keep
							track on what languages this tool should include in the future.</b></i> Thank you very much!
				</p>
				<p style="color: var(--dark); margin-left: 5px; margin-right: 5px; text-align: justify;">- ThePythonGuy
				</p>
			</div>
			<div style="display: flex; align-items: center;">
				<input type="submit" value="Deny" style="width: 50%;" class="submBut" id="cookieDeclineButton">
				<input type="submit" value="Agree" style="width: 50%;" class="submBut" id="cookieAgreeButton">
			</div>
		</div>
	</div>

	<div style="display: none; position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; z-index: 100000; align-content: center; align-items: center;"
		class="fadeIn" id="weaponPopupWindow">
		<div style="position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; background-color: #020202; opacity: 25%;"
			id="popupBackground2">
		</div>
		<div style="position: absolute; border-radius: 10px; background-color: var(--lightGray); height: 50vh; min-height: 140px; width: 355px; right: calc(50vw - 178px); margin-right: auto; padding-bottom: 20px; padding-left: 10px; box-shadow: 0px 0px 9px 0px var(--dark);"
			id="weapon-popup">
			<div style="display: flex; flex-direction: row;">
				<p style="margin-left: 10px; flex-grow: 1;">Weapon selection</p>
				<img id="weaponPopupCancelButton"
					style="width: 28px; height: 28px; border-radius: 100%; border: #F05050 solid 3px; margin-right: 10px; margin-top: 10px;"
					src="resources/cross.png" draggable="false">
			</div>

			<div style="display: flex; flex-direction: row;">
				<div
					style="display: flex; flex-direction:  column; width: 345px; height: calc(50vh - 50px); min-height: 100px;">
					<input type="text" id="weaponFindField" placeholder="Find weapon by name">
					<div style="overflow-y: auto; overflow-x: hidden; float: left;" id="weaponScrollPane"
						class="specialScroll"></div>
				</div>
			</div>
		</div>
	</div>

	<div style="display: none; position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; z-index: 100000; align-content: center; align-items: center;"
		class="fadeOut" id="savePopupWindow">
		<div style="position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; background-color: #020202; opacity: 25%;"
			id="popupBackground3">
		</div>
		<div style="position: absolute; border-radius: 10px; background-color: var(--lightGray); width: 400px; right: calc(50vw - 220px); margin-right: auto; padding: 0 10px 10px 10px; box-shadow: 0px 0px 9px 0px var(--dark);"
			id="save-popup">
			<p style="margin-left: 10px;">Save Team</p>
			<div style="display: flex; align-items: center;">
				<input type="text" class="nameinput" id="saveNameField" placeholder="Team name">
			</div>
			<div style="display: flex; align-items: center;">
				<input type="submit" value="Cancel" style="width: 50%;" class="submBut" id="savePopupCancelButton">
				<input type="submit" value="Save" style="width: 50%;" class="submBut" id="popupSaveButton">
			</div>
		</div>
	</div>

	<div class="topbar"
		style="display: flex; position: absolute; left: -5px; top: -5px; width: 100vw; height: 47px; background: var(--lighterGray); border: 2px solid var(--lightGray); padding-left: 15px; padding-top: 10px; transition: background-color 300ms, border 300ms;">
		<a href="https://github.com/ThePythonGuy3" target="_blank"><img alt="Tool creator"
				src="https://avatars.githubusercontent.com/u/45978337"
				style="width: 40px; height: 40px; border-radius: 5px; user-select: none;" draggable="false"></a>
		<p style="margin-left: 10px; line-height: 10px; user-select: none; color: var(--black);" id="title">Genshin
			Impact Team
			Resource Calculator by ThePythonGuy</p>
		<p
			style="margin-left: 5px; margin-top: 18px; line-height: 10px; user-select: none; color: var(--darkerGray); font-size: 12px;">
			v2.0</p>
	</div>

	<label id="darkModeSwitch" class="switch">
		<input id="darkModeCheckbox" type="checkbox">
		<span class="darkModeSlider"></span>
	</label>

	<div style="position: absolute; left: 0; top: 0; width: 100vw; height: 100vh; z-index: -2; padding: 10px;">
		<div style="display: flex; position: absolute; left: 0; top: 67px; width: 100vw; height: calc(100vh - 77px);">
			<div style="width: 310px;" id="shrink">
				<input type="text" id="characterFindField" placeholder="Find character by name">
				<div style="overflow-y: auto; overflow-x: hidden; margin-left: 10px; float: left; z-index: 1;"
					id="characterScrollPane" class="specialScroll"></div> <!-- Character container -->
			</div>
			<div style="display: flex; flex-grow: 1; gap: 20px; flex-shrink: 0; padding-right: 10px;" id="grow">
				<div style="display: flex;" id="teamArea">
					<div id="teamTopArea">
						<div style="display: flex; justify-content: center; height: 130px; align-items: center; margin-top: 10px;"
							id="teamContainer">
						</div> <!-- Team container -->
						<div style="display: flex; justify-content: center; align-items: center; margin-top: 20px;"
							id="weaponContainer">
						</div> <!-- Weapon container -->
						<div style="display: flex; justify-content: center; height: 46px; gap: 10px;"
							id="buttonContainer">
							<p title="Calculate"
								style="border-radius: 10px; flex-grow: 2; height: 25px; font-size: 15px; text-align: center; padding-top: 6px; box-shadow: 0px 0px 9px 0px var(--darkCinnamon);"
								class="click-out" id="calculateButton">Calculate</p>
							<p title="Save"
								style="border-radius: 10px; flex-grow: 1;height: 25px; font-size: 15px; text-align: center; padding-top: 6px; box-shadow: 0px 0px 9px 0px var(--darkCinnamon);"
								class="click-out" id="saveButton">Save</p>
						</div>
					</div>
					<div id="teamSaveArea" style="position: relative;">
						<div style="position: absolute; left: 0; top: 0; display: flex; flex-direction: column; width: 100%; height: 100%; overflow-y: auto; overflow-x: hidden; background-color: var(--cinnamon); opacity: 0.85; border-radius: 10px; box-shadow: 0px 0px 9px 0px var(--darkCinnamon); transition: background-color 300ms;"
							class="specialScroll">
							<p
								style="width: 100%; text-align: center; margin-top: 18px; color: var(--materialTitleColor); font-size: 14px;">
								No Saved Teams Found</p>
						</div>
					</div>
				</div>

				<div style="flex-grow: 1; min-height: 0;">
					<div style="display: flex; width: 100%; height: 100%; align-content: center; flex-direction: column; opacity: 0.85; background-color: var(--cinnamon); border-radius: 10px; box-shadow: 0px 0px 9px 0px var(--darkCinnamon); position: relative; transition: background-color 300ms;"
						id="matContainer">
						<div class="specialScroll" style="overflow-y: auto; overflow-x: hidden; height: 100%;">
							<p class="materialTitle" style="text-align: center; width: 100%;">Character level-up
								materials</p>
							<div id="characterMaterialPane" style="width: 100%; margin-bottom: 15px;">
								<p class="material">-</p>
							</div>
							<p class="materialTitle" style="text-align: center; width: 100%;">Weapon level-up materials
							</p>
							<div id="weaponMaterialPane" style="width: 100%">
								<p class="material">-</p>
							</div>
						</div>
						<img title="Download as PDF"
							style="position: absolute; left: 0; top: 0; width: 40px; height: 40px; border-radius: 10px; margin: 2px; transition: opacity 200ms; user-select: none;"
							class="disabled" src="resources/download.png" id="downloadButton" draggable="false">
					</div>
				</div>
			</div>
		</div>
		<div id="loader"
			style="width: 100vw; height: 100vh; z-index: 1000; position: absolute; left: 0; top: 0; background: var(--fe); transition: opacity 200ms;">
			<p style="text-align: center; position: absolute; left: 0; top: calc(50vh - 20px); width: 100vw;">Loading...
			</p>
			<p style="text-align: center; position: absolute; left: 0; top: calc(50vh + 5px); width: 100vw;">This can
				take a while.</p>
			<div id="loadingBar">
				<div id="loadingBarStick"></div>
			</div>
			<button
				style="padding-left: 12px; padding-right: 12px; border-radius: 30px; text-align: center; position: absolute; height: 5vh; right: 10px; bottom: 10px;"
				id="skipButton">SKIP (Images may not appear while they are being loaded)</button>
		</div> <!-- Loading screen -->
	</div>
</body>

<div id="unusable" style="display: none; width: 100vw; height: 100vh; z-index: 100
		000; position: absolute; left: 0; top: 0; background: var(--fe);">
	<p style="text-align: center; position: absolute; left: 0; top: 35vh; width: 100vw;">The width of your display is
		too small,<br>this tool does not work properly at this viewport size.<br><br>Please rotate your device or use
		another one.<br>Sorry for any trouble this might cause.<br><br>(Keep in mind it is not optimized for mobile
		devices)</p>
</div> <!-- Width too small message -->

<noscript>
	<div id="javascriptDisabledError"
		style="width: 100vw; height: 100vh; z-index: 100000; position: absolute; left: 0; top: 0; background: var(--fe);">
		<p style="text-align: center; position: absolute; left: 0; top: 40vh; width: 100vw;">
			JavaScript is either not supported or is disabled.<br><br>Please enable JavaScript or update your browser to
			use this tool.</p>
	</div> <!-- JavaScript disabled message -->
</noscript>

</html>